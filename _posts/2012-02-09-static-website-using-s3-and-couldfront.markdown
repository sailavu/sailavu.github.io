---
layout: post
title: "Deploy static website using S3 &amp; Couldfront"
date: 2012-02-09 11:22
comments: true
categories: [AWS]
---

S3 and Cloudfront make a great combination for deploying static websites. Here's a simple step by step guide of how to go about it.

<!-- more -->

- You'll need a domain name. Let's say it's www.domain-name.com
- Create an S3 bucket with the domain name of www.domain-name.com
- Transfer your static files to the bucket.
- Enable the S3 bucket to be a static website. Pick a default file such as index.html and optionally an error page.
- Add a bucket policy so that all files can be accessed. Click on the Edit Bucket Policy link and add the bucket policy shown below (don't forget to replace www.domain-name.com with your domain)

- Go to the URL generated by S3 and see your website in all it's glory - S3 done.
- Now go to the Cloudfront and create a new distribution.
- Most of the options are pretty self-explanatory. Pick a distribution name, select the S3 bucket as source and download is your delivery method. Only thing that wasn't obvious to me was to add www.domain-name.com in the CNAME box.
- Wait up to a minute for your distribution to be generated.
- Grab the distribution url and test it out - Cloudfront done.
- We want the website shown when the user goes to www.domain-name.com. For this go to your domain name provider and add a CNAME record for www to point to the Cloudfront url in the zonefile.
- Wait for a few mins and if you go to www.domain-name.com you should see your website - almost there.
- If you go to the naked domain as in domain-name.com, it might not work. A quick solution for this is to add an A record in the zonefile to point to 174.129.25.170. It's a service provided by [http://wwwizer.com](http://wwwizer.com), which redirects domain-name.com to www.domain-name.com - all done!

---

I haven't given a screenshotted walkthrough so if anything isn't clear please ask away.

##Why bother?

*Speed is a feature* and keeping things simple is nice. If you have a simple website you can avail this setup.

[Jekyll](http://jekyllrb.com), [Stasis](http://stasis.me), [Sprockets](https://github.com/sstephenson/sprockets) make managing and generating static websites nice. Another great example of static site generation using [mustache](http://mustache.github.com/) templates is [Twitter's Bootstrap docs](https://github.com/twitter/bootstrap/tree/master/docs).

##Caveats

When the CNAME points to Cloudfront URL you might get a 403 forbidden error when viewing the website using IE7 & IE8. If you have that problem then you may have to point to S3 URL instead. If you have experienced similar problem and know the fix then please leave a comment.
